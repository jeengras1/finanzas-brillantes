# Nombre oficial de nuestra Corte Suprema
name: 1. Corte Suprema - Validador Constitucional

# La regla que le dice al motor CUÃNDO encenderse
# En este caso, cada vez que haya una nueva "propuesta de cambio" (Pull Request)
on:
  pull_request:
    types: [opened, synchronize]

# La lista de tareas que debe realizar
jobs:
  inspeccion-inicial:
    # UsarÃ¡ una mÃ¡quina virtual limpia de Ubuntu para trabajar
    runs-on: ubuntu-latest
    
    # La secuencia de pasos a seguir
    steps:
      # Paso 1: Imprime un mensaje simple para confirmar que se activÃ³
      - name: ğŸ La Corte Suprema ha iniciado sesiÃ³n.
        run: echo "Iniciando inspecciÃ³n automÃ¡tica del cambio propuesto..."

      # Paso 2: Simula el anÃ¡lisis de un experto (por ahora, solo escribe un mensaje)
      - name: ğŸ•µï¸â€â™€ï¸ Simulando anÃ¡lisis del Consorcio de IAs...
        run: echo "Los expertos estÃ¡n revisando el caso. Pronto emitirÃ¡n un veredicto."
        
      # Este es el paso que publicarÃ¡ el comentario en el Pull Request
      - name: ğŸ—£ï¸ Publicar Veredicto Inicial en el Pull Request
        uses: actions/github-script@v7
        with:
          script: |
            github.rest.issues.createComment({
              owner: context.repo.owner,
              repo: context.repo.repo,
              issue_number: context.issue.number,
              body: "ğŸ›ï¸ **Veredicto de la Corte Suprema** ğŸ›ï¸\n\nÂ¡Hola Director! Hemos recibido tu propuesta de cambio. La Mesa de Trabajo AutomÃ¡tica se ha activado correctamente.\n\n*PrÃ³ximamente, aquÃ­ aparecerÃ¡ el anÃ¡lisis real de Nexus con su **Luz Verde, Amarilla o Roja**.*"
            })
